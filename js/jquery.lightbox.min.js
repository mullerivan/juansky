!function(t){"use strict";t.fn.lightbox=function(e){var i={margin:50,nav:!0,blur:!0,minSize:0},o={items:[],lightbox:null,image:null,current:null,locked:!1,selector:"#lightbox",init:function(e){o.items=e,o.selector="lightbox-"+Math.random().toString().replace(".",""),o.lightbox||(t("body").append('<div id="lightbox" class='+o.selector+' style="display:none;">'+'<a href="#" class="lightbox-close lightbox-button"></a>'+'<div class="lightbox-nav">'+'<a href="#" class="lightbox-previous lightbox-button"></a>'+'<a href="#" class="lightbox-next lightbox-button"></a>'+"</div>"+"</div>"),o.lightbox=t("."+o.selector)),o.items.length>1&&i.nav?t(".lightbox-nav",o.lightbox).show():t(".lightbox-nav",o.lightbox).hide(),o.bindEvents()},loadImage:function(){i.blur&&t("body").addClass("blurred"),t("img",o.lightbox).remove(),o.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var e=t('<img src="'+t(o.current).attr("href")+'" draggable="false">');t(e).load(function(){t(".lightbox-loading").remove(),o.lightbox.append(e),o.image=t("img",o.lightbox).hide(),o.resizeImage()})},resizeImage:function(){var e,n,a,s,r;n=t(window).height()-i.margin,a=t(window).outerWidth(!0)-i.margin,o.image.width("").height(""),s=o.image.height(),r=o.image.width(),r>a&&(e=a/r,r=a,s=Math.round(s*e)),s>n&&(e=n/s,s=n,r=Math.round(r*e)),o.image.width(r).height(s).css({top:(t(window).height()-o.image.outerHeight())/2+"px",left:(t(window).width()-o.image.outerWidth())/2+"px"}).show(),o.locked=!1},getCurrentIndex:function(){return t.inArray(o.current,o.items)},next:function(){return o.locked?!1:(o.locked=!0,o.getCurrentIndex()>=o.items.length-1?t(o.items[0]).click():t(o.items[o.getCurrentIndex()+1]).click(),void 0)},previous:function(){return o.locked?!1:(o.locked=!0,o.getCurrentIndex()<=0?t(o.items[o.items.length-1]).click():t(o.items[o.getCurrentIndex()-1]).click(),void 0)},bindEvents:function(){t(o.items).click(function(e){if(!t("#lightbox").is(":visible")&&(t(window).width()<i.minSize||t(window).height()<i.minSize))return t(this).attr("target","_blank"),void 0;var n=t(this)[0];e.preventDefault(),o.current=n,o.loadImage(),t(document).on("keydown",function(t){27===t.keyCode&&o.close(),39===t.keyCode&&o.next(),37===t.keyCode&&o.previous()})}),o.lightbox.on("click",function(t){this===t.target&&o.close()}),t(o.lightbox).on("click",".lightbox-previous",function(){return o.previous(),!1}),t(o.lightbox).on("click",".lightbox-next",function(){return o.next(),!1}),t(o.lightbox).on("click",".lightbox-close",function(){return o.close(),!1}),t(window).resize(function(){o.image&&o.resizeImage()})},close:function(){t(document).off("keydown"),t(o.lightbox).fadeOut("fast"),t("body").removeClass("blurred")}};t.extend(i,e),o.init(this)}}(jQuery);